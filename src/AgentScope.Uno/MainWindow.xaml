<Window
    x:Class="AgentScope.Uno.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:AgentScope.Uno">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 标题栏 Title Bar -->
        <Grid Grid.Row="0" Background="{ThemeResource SystemAccentColor}" Padding="16,12">
            <TextBlock 
                Text="AgentScope.NET - AI 助手 AI Assistant" 
                FontSize="20" 
                FontWeight="SemiBold"
                Foreground="White"/>
        </Grid>

        <!-- 聊天区域 Chat Area -->
        <ScrollViewer Grid.Row="1" Padding="16">
            <ListView 
                x:Name="ChatListView"
                ItemsSource="{x:Bind _messages}"
                SelectionMode="None">
                <ListView.ItemTemplate>
                    <DataTemplate x:DataType="local:ChatMessage">
                        <Grid Margin="0,8" >
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- 消息头（角色和时间） Message header (role and time) -->
                            <StackPanel Grid.Row="0" Orientation="Horizontal" Spacing="8" Margin="0,0,0,4">
                                <TextBlock 
                                    Text="{x:Bind Role}" 
                                    FontWeight="Bold" 
                                    Foreground="{ThemeResource SystemAccentColor}"/>
                                <TextBlock 
                                    Text="{x:Bind TimeString}" 
                                    FontSize="12" 
                                    Foreground="{ThemeResource SystemControlForegroundBaseMediumBrush}"/>
                            </StackPanel>

                            <!-- 消息内容 Message content -->
                            <Border 
                                Grid.Row="1" 
                                Background="{ThemeResource SystemControlBackgroundAltHighBrush}"
                                CornerRadius="8"
                                Padding="12">
                                <TextBlock 
                                    Text="{x:Bind Content}" 
                                    TextWrapping="Wrap"/>
                            </Border>
                        </Grid>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </ScrollViewer>

        <!-- 输入区域 Input Area -->
        <Grid Grid.Row="2" Background="{ThemeResource SystemControlBackgroundAltHighBrush}" Padding="16">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- 输入框 Input box -->
            <TextBox 
                x:Name="InputBox"
                Grid.Column="0"
                PlaceholderText="输入消息... Type a message..."
                AcceptsReturn="False"
                KeyDown="InputBox_KeyDown"
                Margin="0,0,8,0"/>

            <!-- 发送按钮 Send button -->
            <Button 
                x:Name="SendButton"
                Grid.Column="1"
                Content="发送 Send"
                Click="SendButton_Click"
                Style="{StaticResource AccentButtonStyle}"
                MinWidth="100"/>
        </Grid>
    </Grid>
</Window>
